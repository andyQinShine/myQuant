
<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Flask-SocketIO Test</title>
	<script src="https://cdn.staticfile.org/vue/2.4.2/vue.min.js"></script>
	<script src="https://cdn.bootcss.com/socket.io/1.5.1/socket.io.min.js"></script>

	<link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
    <script src="https://unpkg.com/element-ui/lib/index.js"></script>
</head>
<body>
	<h2>WebSocket</h2>
	<div id="app">

		<!--logs table-->
		<template>
			<el-table :data="logs" border style="width: 100%" height="250">
			<el-table-column prop="time" label="日期" width="250">
			</el-table-column>
			<el-table-column prop="msg" label="信息">
			</el-table-column>
			</el-table>
		</template>
  		

	</div>
	<script>
		const namespace = '/test';
		var socket = io.connect(location.protocol + '//' + document.domain + ':' + location.port + namespace);
		socket.on('logger', function(msg) {
			App.logs.splice(0, 0,JSON.parse(msg.data));  
        })

		var App = new Vue({
			el : '#app',
			data : {
				inputtext:{},
				logs: []
			},
			computed:{
				outputlog: function(){
					return this.logs.join('</br>')
				}
			},
			methods : {
				submit : function(){
					socket.emit('client_event',{data: this.inputtext})
				}
			}
		})
	</script>

	
</body>
</html>